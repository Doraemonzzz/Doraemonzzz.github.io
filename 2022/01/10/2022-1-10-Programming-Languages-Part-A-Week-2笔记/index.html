<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Programming Languages Part A Week 2笔记 | Doraemonzzz</title><meta name="keywords" content="Coursera Programming Languages"><meta name="author" content="Doraemonzzz"><meta name="copyright" content="Doraemonzzz"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="这次回顾Week2的内容，主要是Standard ML的语法介绍。 课程主页： https:&#x2F;&#x2F;www.coursera.org&#x2F;learn&#x2F;programming-languages&#x2F;home B站搬运： https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1dL411j7L7">
<meta property="og:type" content="article">
<meta property="og:title" content="Programming Languages Part A Week 2笔记">
<meta property="og:url" content="http://www.doraemonzzz.com/2022/01/10/2022-1-10-Programming-Languages-Part-A-Week-2%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Doraemonzzz">
<meta property="og:description" content="这次回顾Week2的内容，主要是Standard ML的语法介绍。 课程主页： https:&#x2F;&#x2F;www.coursera.org&#x2F;learn&#x2F;programming-languages&#x2F;home B站搬运： https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1dL411j7L7">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2022-01-10T14:05:00.000Z">
<meta property="article:modified_time" content="2022-01-10T14:09:06.150Z">
<meta property="article:author" content="Doraemonzzz">
<meta property="article:tag" content="Coursera Programming Languages">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="https://github.com/Doraemonzzz/md-photo/blob/master/%E5%A4%B4%E5%83%8F.jpg?raw=true"><link rel="canonical" href="http://www.doraemonzzz.com/2022/01/10/2022-1-10-Programming-Languages-Part-A-Week-2%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6f00f37f957f0608abb8c571105456f0";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-G-RE4B1LKRZD"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-G-RE4B1LKRZD');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"距离上次更新已经","messageNext":"天了，文章内容可能已经过时。"},
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Programming Languages Part A Week 2笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-01-10 22:09:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="/css/bilibili.css" media="defer" onload="this.media='all'"><meta name="google-site-verification" content="c4v-NmuUZRgl3cvtg9GKswryK1YLaPztd_5M-df5VNI" /><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Doraemonzzz" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src= "/img/loading.gif" data-lazy-src="https://github.com/Doraemonzzz/md-photo/blob/master/%E5%A4%B4%E5%83%8F.jpg?raw=true" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">757</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">76</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">30</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-chart-pie"></i><span> 博客统计</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/charts/"><i class="fa-fw far fa-chart-bar"></i><span> 文章统计</span></a></li><li><a class="site-page child" href="/census/"><i class="fa-fw fas fa-chart-area"></i><span> 访问统计</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/top/"><i class="fa-fw fab fa-hotjar"></i><span> 阅读排行榜</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Doraemonzzz</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-chart-pie"></i><span> 博客统计</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/charts/"><i class="fa-fw far fa-chart-bar"></i><span> 文章统计</span></a></li><li><a class="site-page child" href="/census/"><i class="fa-fw fas fa-chart-area"></i><span> 访问统计</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/top/"><i class="fa-fw fab fa-hotjar"></i><span> 阅读排行榜</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Programming Languages Part A Week 2笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-10T14:05:00.000Z" title="发表于 2022-01-10 22:05:00">2022-01-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-01-10T14:09:06.150Z" title="更新于 2022-01-10 22:09:06">2022-01-10</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">函数式编程</a></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Coursera-Programming-Languages/">Coursera Programming Languages</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>23分钟</span></span><span class="post-meta-separator">|</span><span class="leancloud_visitors" id="/2022/01/10/2022-1-10-Programming-Languages-Part-A-Week-2%E7%AC%94%E8%AE%B0/" data-flag-title="Programming Languages Part A Week 2笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2022/01/10/2022-1-10-Programming-Languages-Part-A-Week-2%E7%AC%94%E8%AE%B0/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/2022/01/10/2022-1-10-Programming-Languages-Part-A-Week-2%E7%AC%94%E8%AE%B0/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>这次回顾Week2的内容，主要是Standard ML的语法介绍。</p>
<p>课程主页：</p>
<p><a target="_blank" rel="noopener" href="https://www.coursera.org/learn/programming-languages/home">https://www.coursera.org/learn/programming-languages/home</a></p>
<p>B站搬运：</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1dL411j7L7">https://www.bilibili.com/video/BV1dL411j7L7</a></p>
<span id="more"></span>
<h1 id="Week-2"><a href="#Week-2" class="headerlink" title="Week 2"></a>Week 2</h1><h2 id="ML表达式和变量绑定"><a href="#ML表达式和变量绑定" class="headerlink" title="ML表达式和变量绑定"></a>ML表达式和变量绑定</h2><h3 id="一个非常简单的ML程序"><a href="#一个非常简单的ML程序" class="headerlink" title="一个非常简单的ML程序"></a>一个非常简单的ML程序</h3><pre class="line-numbers language-none"><code class="language-none">(* Programming Languages, Dan Grossman *)
(* Section 1: Our first ML program *)

(* val is a keyword
   x is a variable name
   &#x3D; is used as a keyword here (has different meaning in expressions)
   34 is a very simple expression (and value)
   ; is used as a keyword here (has different meaning in expressions)
 *)
val x &#x3D; 34;
(* static environment: x--&gt;int *)
(* dynamic environment: x--&gt;34 *)

val y &#x3D; 17;
(* static environment: y--&gt;int, x--&gt;int *)
(* dynamic environment: y--&gt;17, x--&gt;34 *)

(* to evaluate an addition, evaluate the subexpressions and add *)
(* to evaluate a variable, lookup its value in the environment  *)

val z &#x3D; (x + y) + (y + 2);
(* static environment: z--&gt;int, y--&gt;int, x--&gt;int *)
(* dynamic environment: z--&gt;70, y--&gt;17, x--&gt;34 *)

val q &#x3D; z+1;
(* static environment: q--&gt;int, z--&gt;int, y--&gt;int, x--&gt;int *)
(* dynamic environment: q--&gt;71, z--&gt;70, y--&gt;17, x--&gt;34 *)
 
val abs_of_z &#x3D; if z &lt; 0 then 0 - z else  z;
(* static environment: abs_of_z--&gt;int, q--&gt;int, z--&gt;int, y--&gt;int, x--&gt;int *)
(* dynamic environment: abs_of_z--&gt;70, q--&gt;71, z--&gt;70, y--&gt;17, x--&gt;34 *)
 
val abs_of_z_simpler &#x3D; abs z;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="变量绑定"><a href="#变量绑定" class="headerlink" title="变量绑定"></a>变量绑定</h3><p>变量绑定的一般形式为：</p>
<pre class="line-numbers language-none"><code class="language-none">val x &#x3D; e;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>语法：<ul>
<li>关键字<code>val</code>和符号<code>=</code></li>
<li>变量<code>x</code></li>
<li>表达式<code>e</code><ul>
<li>这些表达式的有许多形式，大多数包含子表达式</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="语义"><a href="#语义" class="headerlink" title="语义"></a>语义</h3><ul>
<li><strong>语法</strong>是你写东西的方式</li>
<li><strong>语义</strong>就是它的含义<ul>
<li><strong>类型检查</strong>（在程序运行之前）</li>
<li><strong>评估</strong>（在程序运行时）</li>
</ul>
</li>
<li>对于变量绑定：<ul>
<li>类型检查表达式和扩展<strong>静态环境</strong></li>
<li>评估表达式和扩展<strong>动态环境</strong></li>
</ul>
</li>
</ul>
<p>那么精确的语法是什么，各种表达式的类型检查规则和评估规则？好问题！</p>
<h2 id="ML表达式的规则（到目前为止已看到）"><a href="#ML表达式的规则（到目前为止已看到）" class="headerlink" title="ML表达式的规则（到目前为止已看到）"></a>ML表达式的规则（到目前为止已看到）</h2><h3 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h3><ul>
<li><p>我们已经看到了很多种表达式：</p>
<pre class="line-numbers language-none"><code class="language-none">34 true false x e1+e2 e1&lt;e2
if e1 then e2 else e3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li><p>表达式可以任意大，因为任何子表达式都可以包含子子表达式，等等。</p>
</li>
<li><p>每种表达式都有</p>
<ol>
<li>语法</li>
<li>类型检查规则<ul>
<li>生成类型或失败（带有错误消息) </li>
<li>目前为止的类型：int, bool, unit</li>
</ul>
</li>
<li>评估规则（仅用于类型检查）<ul>
<li>生成值（或异常或无限循环）</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><ul>
<li>语法：<ul>
<li>字母，数字，下划线构成的序列，不以数字开头</li>
</ul>
</li>
<li>类型检查：<ul>
<li>在当前静态环境中查找类型，如果不存在，则失败</li>
</ul>
</li>
<li>评估：<ul>
<li>在当前动态环境中查找值</li>
</ul>
</li>
</ul>
<h3 id="加法"><a href="#加法" class="headerlink" title="加法"></a>加法</h3><ul>
<li>语法：<ul>
<li><code>e1+e2</code>，其中<code>e1</code>和<code>e2</code>是表达式</li>
</ul>
</li>
<li>类型检查：<ul>
<li>如果<code>e1</code>和<code>e2</code>具有<code>int</code>类型，则<code>e1+e2</code>具有<code>int</code>类型</li>
</ul>
</li>
<li>评估：<ul>
<li>如果<code>e1</code>评估为<code>v1</code>，<code>e2</code>评估为<code>v2</code>，则<code>e1+e2</code>评估为<code>v1</code>和<code>v2</code>之和</li>
</ul>
</li>
</ul>
<h3 id="值"><a href="#值" class="headerlink" title="值"></a>值</h3><ul>
<li>所有值都是表达式</li>
<li>并非所有表达式都是值</li>
<li>每个值都在”零步”内”对自己进行评估”（指的是值就是其本身）</li>
<li>示例：<ul>
<li>34, 17, 42具有类型int</li>
<li>true、false具有类型bool</li>
<li>()具有类型unit</li>
</ul>
</li>
</ul>
<h2 id="REPL和错误信息"><a href="#REPL和错误信息" class="headerlink" title="REPL和错误信息"></a>REPL和错误信息</h2><h3 id="实践学"><a href="#实践学" class="headerlink" title="实践学"></a>实践学</h3><ul>
<li>前两部分已经建立了关键的概念基础</li>
<li>但你还需要一些实践学： <ul>
<li>我们如何使用REPL运行程序？</li>
<li>当我们犯错时，会发生什么？</li>
</ul>
</li>
<li>努力培养对错误的适应力<ul>
<li>放慢速度</li>
<li>不要惊慌</li>
<li>仔细阅读你写的东西</li>
</ul>
</li>
</ul>
<h3 id="use"><a href="#use" class="headerlink" title="use"></a>use</h3><ul>
<li><code>use “foo.sml”</code>是一个不寻常的表达式</li>
<li>它从文件foo.sml输入绑定信息</li>
<li>结果()绑定到变量it<ul>
<li>可忽略</li>
</ul>
</li>
</ul>
<h3 id="REPL"><a href="#REPL" class="headerlink" title="REPL"></a>REPL</h3><ul>
<li>Read-Eval-Print-Loop的名称很好</li>
<li>可以将其视为运行程序的一种奇怪/方便的方式<ul>
<li>但更方便的是快速试用</li>
<li>然后将其移到测试文件中以便于重用</li>
</ul>
</li>
<li>在不重新启动REPL会话的情况下不要使用use，原因将在下一节中讨论<ul>
<li>（但在会话开始时将其用于多个文件是可以的）</li>
</ul>
</li>
</ul>
<h3 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h3><p>你的错误可能是：</p>
<ul>
<li>语法：您编写的内容没有任何意义或不是您想要的构造</li>
<li>类型检查：您编写的内容没有通过类型检查</li>
<li>评估：程序可以运行但生成错误答案、异常或无限循环</li>
</ul>
<p>在调试时，即使有时一种错误看起来是另一种错误，也要把错误类型搞清楚。</p>
<h2 id="Shadowing"><a href="#Shadowing" class="headerlink" title="Shadowing"></a>Shadowing</h2><h3 id="同一变量的多重绑定"><a href="#同一变量的多重绑定" class="headerlink" title="同一变量的多重绑定"></a>同一变量的多重绑定</h3><ul>
<li>同一个变量的多个变量绑定往往是糟糕的风格<ul>
<li>往往令人困惑</li>
</ul>
</li>
<li>但这是一个有启发性的练习<ul>
<li>有助于解释环境如何”工作”</li>
<li>有助于解释变量绑定如何 “工作” </li>
</ul>
</li>
</ul>
<p>（现在强调这一点，为first-class function打下基础）</p>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><pre class="line-numbers language-none"><code class="language-none">(* Programming Languages, Dan Grossman *)
(* Section 1: Examples to Demonstrate Shadowing *)

val a &#x3D; 10

val b &#x3D; a * 2

val a &#x3D; 5

val c &#x3D; b

val d &#x3D; a

val a &#x3D; a + 1

(* next line does not type-check, f not in environment *)
(* val g &#x3D; f - 3  *)

val f &#x3D; a * 2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="两个原因"><a href="#两个原因" class="headerlink" title="两个原因"></a>两个原因</h3><ol>
<li>变量绑定中的表达式被”急切地”评估 <ul>
<li>在变量绑定”完成”之前</li>
<li>之后，产生值的表达式是不相关的 </li>
</ul>
</li>
<li>在ML中没有办法”赋值给”一个变量 <ul>
<li>只能在以后的环境中shadow它</li>
</ul>
</li>
</ol>
<h3 id="use-1"><a href="#use-1" class="headerlink" title="use"></a>use</h3><ul>
<li>这就是为什么我如此坚持在不重启REPL的情况下不在一个文件上重复使用use的原因 </li>
<li>否则，你就会再次引入一些相同的绑定方式<ul>
<li>可能会让人觉得错误的代码是正确的</li>
<li>可能会让人觉得正确的代码是错误的 </li>
<li>（这一切都定义得很好，但我们会感到困惑）</li>
</ul>
</li>
</ul>
<h2 id="函数（非正式的）"><a href="#函数（非正式的）" class="headerlink" title="函数（非正式的）"></a>函数（非正式的）</h2><h3 id="函数定义"><a href="#函数定义" class="headerlink" title="函数定义"></a>函数定义</h3><p>函数：整个课程中最重要的构建块</p>
<ul>
<li>像Java方法一样，有参数和结果</li>
<li>但没有类、this、return等</li>
</ul>
<p>函数绑定示例：</p>
<pre class="line-numbers language-none"><code class="language-none">(* Note: correct only if y&gt;&#x3D;0 *)
fun pow (x : int, y : int) &#x3D;
	if y&#x3D;0
	then 1
	else x * pow(x,y-1)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意：正文包括一个（递归）函数调用：<code>pow(x,y-1)</code></p>
<h3 id="一些陷阱"><a href="#一些陷阱" class="headerlink" title="一些陷阱"></a>一些陷阱</h3><p>有三个常见的“陷阱”•</p>
<ul>
<li>如果弄乱了函数参数语法，则会出现错误消息</li>
<li>在类型语法中使用<code>*</code>不是乘法<ul>
<li>例如：<code>int * int-&gt;int</code></li>
<li>在表达式中，<code>*</code>是乘法：<code>x * pow(x,y-1)</code></li>
</ul>
</li>
<li>不能引用后面的函数绑定<ul>
<li>这只是ML的规则</li>
<li>辅助函数必须在使用之前出现</li>
<li>需要特殊构造以实现相互递归（后续课程）</li>
</ul>
</li>
</ul>
<h3 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h3><ul>
<li>如果你还不习惯递归，你很快就会习惯的<ul>
<li>将用于大多数函数获取或返回列表</li>
</ul>
</li>
<li>“有意义”，因为对同一函数的调用可以解决“更简单”的问题</li>
<li>递归比循环更强大<ul>
<li>我们不会在ML中使用循环</li>
<li>循环往往（并非总是）掩盖了简单、优雅的解决方案</li>
</ul>
</li>
</ul>
<h2 id="函数（正式的）"><a href="#函数（正式的）" class="headerlink" title="函数（正式的）"></a>函数（正式的）</h2><h3 id="函数绑定：3个问题"><a href="#函数绑定：3个问题" class="headerlink" title="函数绑定：3个问题"></a>函数绑定：3个问题</h3><ul>
<li>语法：<code>fun x0 (x1 : t1, … , xn : tn) = e</code><ul>
<li>(将在以后的讲座中进行概括) </li>
</ul>
</li>
<li>评估：函数就是一个值!(但还没有评估)<ul>
<li>将<code>x0</code>添加到环境中，以便以后的表达式可以调用它</li>
<li>(函数调用语义也允许递归) </li>
</ul>
</li>
<li>类型检查： <ul>
<li>添加绑定<code>x0 : (t1 * … * tn) -&gt; t</code>如果：</li>
<li>可以对主体<code>e</code>进行类型检查，使其在包含的静态环境中具有类型<code>t</code>。<ul>
<li>“包围”静态环境（早期绑定）</li>
<li><code>x1 : t1, …, xn : tn</code> (参数及其类型) </li>
<li><code>x0 : (t1 * … * tn) -&gt; t</code> (用于递归)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="更多类型检查"><a href="#更多类型检查" class="headerlink" title="更多类型检查"></a>更多类型检查</h3><pre class="line-numbers language-none"><code class="language-none">fun x0 (x1 : t1, … , xn : tn) &#x3D; e<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>新的一种类型：<code>(t1 * … * tn) -&gt; t</code><ul>
<li>结果类型在右边 </li>
<li>整体的类型检查结果是在程序的其余部分给<code>x0</code>这种类型（与Java不同，对之前的绑定不适用） </li>
<li>参数只能在<code>e</code>中使用（不足为奇）。</li>
</ul>
</li>
<li>因为对<code>x0</code>的调用将返回<code>e</code>的评估结果，<code>x0</code>的返回类型就是<code>e</code>的类型。</li>
<li>如果存在这样的<code>t</code>，类型检查器会”神奇地”找出<code>t</code>。<ul>
<li>后面的讲座：由于递归的存在，需要一些聪明的方法。</li>
<li>在hw1之后还有更多的魔法：以后也可以省略参数类型。</li>
</ul>
</li>
</ul>
<h3 id="函数调用"><a href="#函数调用" class="headerlink" title="函数调用"></a>函数调用</h3><p>一种新的表达方式：3个问题。</p>
<p>语法：<code>e0 (e1,…,en)</code></p>
<ul>
<li>（稍后将进行概括）</li>
<li>如果只有一个参数，则括号是可选的 </li>
</ul>
<p>类型检查：</p>
<ul>
<li>如果<ul>
<li><code>e0</code>有某种类型<code>(t1 * … * tn) -&gt; t</code></li>
<li><code>e1</code>有类型<code>t1,...,en</code>有类型<code>tn</code> </li>
</ul>
</li>
<li>那么<ul>
<li><code>e0 (e1,...,en)</code>的类型为<code>t</code></li>
</ul>
</li>
<li>例子：前面例子中的<code>pow(x,y-1)</code>的类型为<code>int</code></li>
</ul>
<p>评估：</p>
<ol>
<li>(在当前动态环境下，)将<code>e0</code>评估为一个函数<code>fun x0 (x1 : t1, ..., xn : tn) = e</code><ul>
<li>由于调用类型检查，结果将是一个函数 </li>
</ul>
</li>
<li>(在当前动态环境下，)将参数评估为值 <code>v1, ..., vn</code></li>
<li>结果是在一个扩展环境中评估<code>e</code>，将<code>x1</code>映射到<code>v1</code>, …, <code>xn</code>映射到<code>vn</code><ul>
<li>(“环境”实际上是定义函数的环境，并包括<code>x0</code>，以便递归)</li>
</ul>
</li>
</ol>
<h2 id="Pairs和其他元组"><a href="#Pairs和其他元组" class="headerlink" title="Pairs和其他元组"></a>Pairs和其他元组</h2><h3 id="元组和列表"><a href="#元组和列表" class="headerlink" title="元组和列表"></a>元组和列表</h3><p>到目前为止：数字、布尔运算、条件式、变量、函数 </p>
<ul>
<li>现在介绍用多个部分建立数据的方法 </li>
<li>这一点至关重要 </li>
<li>Java的例子：有字段的类、数组</li>
</ul>
<p>现在：</p>
<ul>
<li>元组：固定的”数量”，可能有不同的类型 </li>
</ul>
<p>即将介绍：</p>
<ul>
<li><p>列表：具有相同类型的任何”数量”</p>
<p>以后：</p>
</li>
<li><p>创建复合数据的其他更普遍的方法</p>
</li>
</ul>
<h3 id="pairs（两个元素的元组）"><a href="#pairs（两个元素的元组）" class="headerlink" title="pairs（两个元素的元组）"></a>pairs（两个元素的元组）</h3><p>需要一种方法来建立pair，并需要一种方法来获取元素：</p>
<p>建立：</p>
<ul>
<li>语法：<code>(e1, e2)</code></li>
<li>评估：将<code>e1</code>评估为<code>v1</code>，<code>e2</code>评估为<code>v2</code>；结果为<code>(v1,v2)</code><ul>
<li>一对值就是一个值</li>
</ul>
</li>
<li>类型检查：如果<code>e1</code>有类型<code>ta</code>，<code>e2</code>有类型<code>tb</code>，那么这pair表达式有类型<code>ta * tb</code><ul>
<li>一种新的类型</li>
</ul>
</li>
</ul>
<p>获取：</p>
<ul>
<li>语法：<code>#1 e</code>和<code>#2 e</code></li>
<li>评估：将<code>e</code>评估为一对值，并返回第一块或第二块<ul>
<li>示例：如果<code>e</code>是变量<code>x</code>，那么在环境中查找<code>x</code>。</li>
</ul>
</li>
<li>类型检查：如果e的类型为<code>ta * tb</code>，那么<code>#1 e</code>的类型为<code>ta</code>，<code>#2 e</code>的类型为<code>tb</code></li>
</ul>
<h3 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h3><pre class="line-numbers language-none"><code class="language-none">(* Programming Languages, Dan Grossman *)
(* Section 1: Pairs and Tuples *)

(* pairs *)

fun swap (pr : int*bool) &#x3D;
    (#2 pr, #1 pr)

fun sum_two_pairs (pr1 : int*int, pr2 : int*int) &#x3D;
    (#1 pr1) + (#2 pr1) + (#1 pr2) + (#2 pr2)

    (* returning a pair a real pain in Java *)
fun div_mod (x : int, y : int) &#x3D; 
    (x div y, x mod y)

fun sort_pair (pr : int*int) &#x3D;
    if (#1 pr) &lt; (#2 pr)
    then pr
    else (#2 pr, #1 pr) <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h3><p>实际上，你可以有超过两部分的元组</p>
<ul>
<li>一个新的特征：pair的泛化</li>
</ul>
<p>示例：</p>
<ul>
<li><code>(e1,e2,…,en)</code></li>
<li><code>ta * tb * … * tn</code></li>
<li><code>#1 e, #2 e, #3 e, …</code></li>
</ul>
<p>作业1经常使用<code>int*int*int</code>类型的三元组。</p>
<h3 id="嵌套"><a href="#嵌套" class="headerlink" title="嵌套"></a>嵌套</h3><p>对pair和元组可以随意嵌套</p>
<ul>
<li>不是一个新的特征：由语法和语义所暗示</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">(* nested pairs *)

val x1 &#x3D; (7,(true,9)) (* int * (bool*int) *)

val x2 &#x3D; #1 (#2 x1)  (* bool *)

val x3 &#x3D; (#2 x1)      (* bool*int *)

val x4 &#x3D; ((3,5),((4,8),(0,0))) (* (int * int) * ((int * int) * (int * int)) *)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="列表介绍"><a href="#列表介绍" class="headerlink" title="列表介绍"></a>列表介绍</h2><h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><ul>
<li>尽管有元组可以嵌套，但变量的类型仍然”承诺”一个特定的”数量”的数据 </li>
<li>与此相反，一个列表：<ul>
<li>可以有任何数量的元素</li>
<li>但所有的列表元素都有相同的类型 </li>
</ul>
</li>
<li>需要有方法来建立列表并访问这些部分…</li>
</ul>
<h3 id="建立列表"><a href="#建立列表" class="headerlink" title="建立列表"></a>建立列表</h3><ul>
<li><p>空列表是一个值：</p>
<pre class="line-numbers language-none"><code class="language-none">[]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>一般来说，值构成的列表是一个值；元素由逗号分隔：</p>
<pre class="line-numbers language-none"><code class="language-none">[v1,v2,…,vn]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>如果<code>e1</code>评估为<code>v</code>，<code>e2</code>评估为一个列表<code>[v1,...,vn]</code>，那么<code>e1::e2</code>评估为<code>[v,...,vn]</code>：</p>
<pre class="line-numbers language-none"><code class="language-none">e1::e2 (* pronounced “cons” *)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
</ul>
<h3 id="获得列表元组"><a href="#获得列表元组" class="headerlink" title="获得列表元组"></a>获得列表元组</h3><p>在我们学习模式匹配之前，我们将使用三个标准库函数：</p>
<ul>
<li>当且仅当<code>e</code>的值为<code>[]</code>时，<code>null e</code>的值为真。</li>
<li>如果<code>e</code>的值为<code>[v1,v2,...,vn]</code>，那么<code>hd e</code>的值为<code>v1</code>。<ul>
<li>（如果<code>e</code>评估为<code>[]</code>，则引发异常）。</li>
</ul>
</li>
<li>如果<code>e</code>评估为<code>[v1,v2,...,vn]</code>，那么<code>tl e</code>评估为<code>[v2,...,vn]</code>。<ul>
<li>（如果<code>e</code>评估为<code>[]</code>，则引发异常）。</li>
<li>注意到结果是一个列表。</li>
</ul>
</li>
</ul>
<h3 id="列表操作的类型检查"><a href="#列表操作的类型检查" class="headerlink" title="列表操作的类型检查"></a>列表操作的类型检查</h3><ul>
<li><p>大量的新类型：对于任何类型的<code>t</code>，类型<code>t list</code>描述了所有元素都具有类型<code>t</code>的列表</p>
<ul>
<li><p>例子：</p>
<pre class="line-numbers language-none"><code class="language-none">int list bool list int list list (int * int) list (int list * int) list<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
</ul>
</li>
<li><p>因此，<code>[]</code>可以有任何类型的<code>t list</code></p>
<ul>
<li>SML使用类型<code>&#39;a list</code>来表示（”quote a”或 “alpha”）。</li>
</ul>
</li>
<li><p>对于<code>e1::e2</code>的类型检查，我们需要<code>t</code>，使<code>e1</code>具有<code>t</code>类型，<code>e2</code>具有<code>t list</code>类型。那么结果的类型就是<code>t list</code>。</p>
</li>
<li><p><code>null : &#39;a list -&gt; bool</code></p>
</li>
<li><p><code>hd : &#39;a list -&gt; &#39;a</code></p>
</li>
<li><p><code>tl : &#39;a list -&gt; &#39;a list</code></p>
</li>
</ul>
<h2 id="列表函数"><a href="#列表函数" class="headerlink" title="列表函数"></a>列表函数</h2><h3 id="列表函数示例"><a href="#列表函数示例" class="headerlink" title="列表函数示例"></a>列表函数示例</h3><pre class="line-numbers language-none"><code class="language-none">(* Functions taking or producing lists *)

fun sum_list (xs : int list) &#x3D;
    if null xs
    then 0
    else hd(xs) + sum_list(tl(xs))

fun countdown (x : int) &#x3D;
    if x&#x3D;0
    then []
    else x :: countdown(x-1)

fun append (xs : int list, ys : int list) &#x3D; (* part of the course logo :) *)
    if null xs
    then ys
    else hd(xs) :: append(tl(xs), ys)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="又是递归"><a href="#又是递归" class="headerlink" title="又是递归"></a>又是递归</h3><ul>
<li>列表上的函数通常是递归的 <ul>
<li>唯一”获得所有的元素”的方法是</li>
<li>对于空列表，答案应该是什么？</li>
<li>对于非空列表，答案应该是什么？<ul>
<li>通常是以列表尾部的答案为标准!</li>
</ul>
</li>
</ul>
</li>
<li>同样地，产生可能是任何大小的列表的函数将是递归的 <ul>
<li>你从更小的列表中创建一个列表</li>
</ul>
</li>
</ul>
<h3 id="pair构成的列表"><a href="#pair构成的列表" class="headerlink" title="pair构成的列表"></a>pair构成的列表</h3><pre class="line-numbers language-none"><code class="language-none">(* More functions over lists, here lists of pairs of ints *)

fun sum_pair_list (xs : (int * int) list) &#x3D;
    if null xs
    then 0
    else #1 (hd(xs)) + #2 (hd(xs)) + sum_pair_list(tl(xs))

fun firsts (xs : (int * int) list) &#x3D;
    if null xs
    then []
    else (#1 (hd xs))::(firsts(tl xs))

fun seconds (xs : (int * int) list) &#x3D;
    if null xs
    then []
    else (#2 (hd xs))::(seconds(tl xs))

fun sum_pair_list2 (xs : (int * int) list) &#x3D;
    (sum_list (firsts xs)) + (sum_list (seconds xs))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="Let表达式"><a href="#Let表达式" class="headerlink" title="Let表达式"></a>Let表达式</h2><h3 id="复习"><a href="#复习" class="headerlink" title="复习"></a>复习</h3><p>我们在ML的核心部分已经取得了巨大的进展：</p>
<ul>
<li>类型：<code>int bool unit t1*...*tn t list t1*...*tn-&gt;t</code><ul>
<li>类型的”嵌套”（上面的每个<code>t</code>本身可以是一个复合类型）</li>
</ul>
</li>
<li>变量、环境和基本表达式</li>
<li>函数<ul>
<li>构建：<code>fun x0 (x1:t1, ..., xn:tn) = e</code></li>
<li>使用：<code>e0 (e1, ..., en)</code></li>
</ul>
</li>
<li>元组<ul>
<li>构建：<code>(e1, ..., en)</code></li>
<li>使用：<code>#1 e, #2 e, ...</code></li>
</ul>
</li>
<li>列表<ul>
<li>构建：<code>[] e1::e2</code></li>
<li>使用：<code>null e hd e tl e</code></li>
</ul>
</li>
</ul>
<h3 id="现在"><a href="#现在" class="headerlink" title="现在"></a>现在</h3><ul>
<li>我们需要的重要工具是：局部绑定<ul>
<li>为了风格和方便 </li>
</ul>
</li>
<li>这一段： <ul>
<li>基本的let-expressions</li>
</ul>
</li>
<li>接下来的一段：<ul>
<li>一个很自然的想法：嵌套函数绑定</li>
<li>为了效率（不是”只是快一点”） </li>
</ul>
</li>
<li>引入局部绑定的结构只是一个表达式，所以我们可以在表达式可以使用的任何地方使用它。</li>
</ul>
<h3 id="Let-表达式"><a href="#Let-表达式" class="headerlink" title="Let-表达式"></a>Let-表达式</h3><p>3个问题：</p>
<ul>
<li>语法：<code>let b1 b2 … bn in e end</code><ul>
<li>每个<code>bi</code>都是任何绑定，<code>e</code>是任何表达式</li>
</ul>
</li>
<li>类型检查：在包含先前绑定的静态环境中对每个<code>bi</code>和<code>e</code>进行类型检查。<ul>
<li>整个<code>let</code>表达式的类型类型<code>e</code>。</li>
</ul>
</li>
<li>评估：在包含先前绑定的动态环境中评估每个<code>bi</code>和<code>e</code>。<ul>
<li>整个<code>let</code>表达式的结果是计算<code>e</code>的结果。</li>
</ul>
</li>
</ul>
<h3 id="例子-2"><a href="#例子-2" class="headerlink" title="例子"></a>例子</h3><pre class="line-numbers language-none"><code class="language-none">fun silly1 (z : int) &#x3D;
    let val x &#x3D; if z &gt; 0 then z else 34
	    val y &#x3D; x+z+9
    in
		if x &gt; y then x*2 else y*y
    end

fun silly2 () &#x3D;
    let val x &#x3D; 1 
    in 
		(let val x &#x3D; 2 in x+1 end) + 
		(let val y &#x3D; x+2 in y+1 end)
    end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>silly2的风格很差，但表明let-表达式是表达式</p>
<ul>
<li>也可以在函数调用参数、if 分支等中使用它们。</li>
<li>还要注意shadowing</li>
</ul>
<h3 id="新的内容"><a href="#新的内容" class="headerlink" title="新的内容"></a>新的内容</h3><ul>
<li>新的内容是范围：绑定在环境中的位置 <ul>
<li>在后面的绑定和let-表达式的主体中<ul>
<li>（除非后面的或嵌套的绑定shadow它） </li>
</ul>
</li>
<li>只在后面的绑定和let表达式的主体中</li>
</ul>
</li>
<li>没有其他新的内容：<ul>
<li>可以放任何我们想要的绑定，甚至函数绑定</li>
<li>类型检查和评估就像在”顶层”一样</li>
</ul>
</li>
</ul>
<h2 id="嵌套函数"><a href="#嵌套函数" class="headerlink" title="嵌套函数"></a>嵌套函数</h2><h3 id="任何绑定"><a href="#任何绑定" class="headerlink" title="任何绑定"></a>任何绑定</h3><p>根据我们对let-表达式的规则，我们可以在任何let-表达式内定义函数</p>
<pre class="line-numbers language-none"><code class="language-none">let b1 b2 … bn in e end<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>这是一个很自然的想法，通常也是很好的风格。</p>
<h3 id="例子-3"><a href="#例子-3" class="headerlink" title="例子"></a>例子</h3><pre class="line-numbers language-none"><code class="language-none">fun countup_from1 (x : int) &#x3D;
    let fun count (from:int, to:int) &#x3D;
	    if from&#x3D;to
	    then to::[] (* note: can also write [to] *)
	    else from :: count(from+1,to)
    in
	count(1,x)
    end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>这显示了如何使用本地函数绑定，但是<ul>
<li>更好的版本在下一张幻灯片上</li>
<li>count可能在其他地方有用</li>
</ul>
</li>
</ul>
<h3 id="更好的例子"><a href="#更好的例子" class="headerlink" title="更好的例子"></a>更好的例子</h3><pre class="line-numbers language-none"><code class="language-none">fun countup_from1_better (x : int) &#x3D;
    let fun count (from:int) &#x3D;
	    if from&#x3D;x
	    then x::[]
	    else from :: count(from+1)
    in
	count 1
    end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>函数可以在其定义的环境中使用绑定：<ul>
<li>来自”外部”环境的绑定<ul>
<li>例如外部函数的参数</li>
</ul>
</li>
<li>let-表达式中的早期绑定</li>
</ul>
</li>
<li>不必要的参数通常是不好的风格<ul>
<li>就像前面的例子一样</li>
</ul>
</li>
</ul>
<h3 id="嵌套函数：风格"><a href="#嵌套函数：风格" class="headerlink" title="嵌套函数：风格"></a>嵌套函数：风格</h3><ul>
<li>在它们（指辅助函数）所帮助的函数内定义辅助函数是良好的风格，如果它们：<ul>
<li>不太可能在其他地方有用</li>
<li>很可能在其他地方被误用</li>
<li>很可能在以后被修改或删除</li>
</ul>
</li>
<li>代码设计中的一个基本权衡：重复使用代码可以节省精力和避免错误，但使重复使用的代码以后更难修改</li>
</ul>
<h2 id="使用Let表达式避免重复计算"><a href="#使用Let表达式避免重复计算" class="headerlink" title="使用Let表达式避免重复计算"></a>使用Let表达式避免重复计算</h2><h3 id="避免重复递归"><a href="#避免重复递归" class="headerlink" title="避免重复递归"></a>避免重复递归</h3><p>考虑这段代码和它的递归调用</p>
<ul>
<li>不要担心对<code>null、hd</code>和<code>tl</code>的调用，因为它们的工作量很小。</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">fun bad_max (xs : int list) &#x3D;
    if null xs
    then 0
    else if null (tl xs)
    then hd xs
    else if hd xs &gt; bad_max(tl xs)
    then hd xs
    else bad_max(tl xs)
    
let x &#x3D; bad_max [50,49,…,1]
let y &#x3D; bad_max [1,2,…,50]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Fast-vs-unusable"><a href="#Fast-vs-unusable" class="headerlink" title="Fast vs unusable"></a>Fast vs unusable</h3><p>考虑代码的如下部分以及对x, y调用的结果：</p>
<pre class="line-numbers language-none"><code class="language-none">if hd xs &gt; bad_max(tl xs)
    then hd xs
    else bad_max(tl xs)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><img src= "/img/loading.gif" data-lazy-src="https://github.com/Doraemonzzz/md-photo/blob/master/programming-languages/Week2/1.jpg?raw=true" alt=""></p>
<h3 id="数学从不说谎"><a href="#数学从不说谎" class="headerlink" title="数学从不说谎"></a>数学从不说谎</h3><ul>
<li>假设一个<code>bad_max</code>调用的if-then-else逻辑和对<code>hd, null, tl</code>的调用需要$10^{-7}$秒<ul>
<li>那么<code>bad_max [50,49,...,1]</code>需要$50 \times 10^{-7}$秒</li>
<li>而<code>bad_max [1,2,...,50]</code>需要$1.12 \times 10^8$秒<ul>
<li>超过3.5年</li>
<li><code>bad_max [1,2,...,55]</code>需要1个多世纪。</li>
<li>买一台更快的电脑并没有什么帮助</li>
</ul>
</li>
</ul>
</li>
<li>关键是不要做重复的工作<ul>
<li>将递归结果保存在本地绑定中是至关重要的</li>
</ul>
</li>
</ul>
<h3 id="高效的max"><a href="#高效的max" class="headerlink" title="高效的max"></a>高效的max</h3><pre class="line-numbers language-none"><code class="language-none">fun good_max (xs : int list) &#x3D;
    if null xs
    then 0
    else if null (tl xs)
    then hd xs
    else
        (* for style, could also use a let-binding for (hd xs) *)
        let val tl_ans &#x3D; good_max(tl xs)
        in
            if hd xs &gt; tl_ans
            then hd xs
            else tl_ans
        end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Fast-vs-fast"><a href="#Fast-vs-fast" class="headerlink" title="Fast vs fast"></a>Fast vs fast</h3><p><img src= "/img/loading.gif" data-lazy-src="https://github.com/Doraemonzzz/md-photo/blob/master/programming-languages/Week2/2.jpg?raw=true" alt=""></p>
<h2 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h2><h3 id="Options的动机"><a href="#Options的动机" class="headerlink" title="Options的动机"></a>Options的动机</h3><p>让<code>max</code>对空列表返回0真的很糟糕</p>
<ul>
<li>可以引发一个异常（未来的主题）。</li>
<li>可以返回一个零元素或单元素的列表<ul>
<li>这个方法可行，但是风格很差，因为对option的内置支持直接表达了这种情况</li>
</ul>
</li>
</ul>
<h3 id="Options-1"><a href="#Options-1" class="headerlink" title="Options"></a>Options</h3><ul>
<li>对任何类型<code>t</code>，<code>t option</code>是一种类型<ul>
<li>(很像<code>t list</code>，但是是不同的类型，不是一个列表)</li>
</ul>
</li>
<li>构建：<ul>
<li><code>NONE</code>有类型<code>&#39;a option</code>（很像<code>[]</code>有类型<code>&#39;a list</code>）。</li>
<li><code>SOME e</code>有<code>t option</code>的选项，如果<code>e</code>有类型<code>t</code>（很像<code>e::[]</code>）。</li>
</ul>
</li>
<li>访问：<ul>
<li><code>isSome</code>有类型<code>&#39;a option -&gt; bool</code></li>
<li><code>valOf</code>有类型<code>&#39;a option -&gt; &#39;a</code> (除了给定NONE)</li>
</ul>
</li>
</ul>
<h3 id="例子-4"><a href="#例子-4" class="headerlink" title="例子"></a>例子</h3><pre class="line-numbers language-none"><code class="language-none">fun better_max (xs : int list) &#x3D; 
	if null xs 
	then NONE 
	else 
		let val tl_ans &#x3D; better_max(tl xs) 
		in 
			if isSome tl_ans 
				andalso valOf tl_ans &gt; hd xs 
			then tl_ans 
			else SOME (hd xs) 
		end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>val better_max = fn : int list -&gt; int option</code></p>
<ul>
<li>这样做没有什么问题，但作为一个风格问题，可能希望不要在递归中做这么多无用的”<code>valOf</code>“。</li>
</ul>
<h3 id="修改后的例子"><a href="#修改后的例子" class="headerlink" title="修改后的例子"></a>修改后的例子</h3><pre class="line-numbers language-none"><code class="language-none">fun better_max2 (xs : int list) &#x3D;
    if null xs
    then NONE
    else let (* fine to assume argument nonempty because it is local *)
        fun max_nonempty (xs : int list) &#x3D;
            if null (tl xs) (* xs better not be [] *)
            then hd xs
            else let val tl_ans &#x3D; max_nonempty(tl xs)
                 in
                 if hd xs &gt; tl_ans
                 then hd xs
                 else tl_ans
                 end
        in
            SOME (max_nonempty xs)
        end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="更多布尔表达式和比较表达式"><a href="#更多布尔表达式和比较表达式" class="headerlink" title="更多布尔表达式和比较表达式"></a>更多布尔表达式和比较表达式</h2><h3 id="更多的表达式"><a href="#更多的表达式" class="headerlink" title="更多的表达式"></a>更多的表达式</h3><p>一些“零碎的东西”还没有出现：</p>
<ul>
<li>组合布尔表达式（and, or, not）。</li>
<li>比较操作</li>
</ul>
<h3 id="布尔操作"><a href="#布尔操作" class="headerlink" title="布尔操作"></a>布尔操作</h3><pre class="line-numbers language-none"><code class="language-none">e1 andalso e2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>类型检查：<code>e1</code>和<code>e2</code>必须具有<code>bool</code>类型。</li>
<li>评估：如果<code>e1</code>的结果是<code>false</code>，那么结果为<code>false</code>，否则结果是<code>e2</code>。</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">e1 orelse e2
not e1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li>许多语言的语法是<code>e1 &amp;&amp; e2</code>, <code>e1 || e2</code>, <code>!e</code><ul>
<li><code>&amp;&amp;</code>和<code>||</code>在ML中并不存在，而且<code>!</code>的意思也不一样</li>
</ul>
</li>
<li>“短路”评估意味着<code>andalso</code>和<code>orelse</code>不是函数，但<code>not</code>只是一个预定义的函数</li>
</ul>
<h3 id="布尔运算的风格"><a href="#布尔运算的风格" class="headerlink" title="布尔运算的风格"></a>布尔运算的风格</h3><p>语言实际上不需要<code>andalso，orelse，not</code>：</p>
<pre class="line-numbers language-none"><code class="language-none">(* e1 andalso e2 *)
if e1
then e2
else false

(* e1 orelse e2 *)
if e1
then true
else e2

(* not e1 *) 
if e1 
then false 
else true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用更简洁的形式，一般来说风格会好很多，所以绝对不要像下面这样做：</p>
<pre class="line-numbers language-none"><code class="language-none">(* just say e (!!!) *)
if e
then true
else false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><ul>
<li><p>用于比较<code>int</code>值。</p>
<pre class="line-numbers language-none"><code class="language-none">&#x3D; &lt;&gt; &gt; &lt; &gt;&#x3D; &lt;&#x3D;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>你可能会看到奇怪的错误信息，因为比较运算符也可以用于其他一些类型。</p>
<ul>
<li><code>&gt; &lt; &gt;= &lt;=</code>可以与<code>real</code>一起使用，但1个<code>int</code>和1个<code>read</code>不能一起使用。</li>
<li><code>= &lt;&gt;</code>可以用于任何 “平等类型”，但不能用于实数。<ul>
<li>我们先不讨论平等类型的问题</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="不可变数据的一个关键好处"><a href="#不可变数据的一个关键好处" class="headerlink" title="不可变数据的一个关键好处"></a>不可变数据的一个关键好处</h2><h3 id="一个有价值的非特性：没有突变"><a href="#一个有价值的非特性：没有突变" class="headerlink" title="一个有价值的非特性：没有突变"></a>一个有价值的非特性：没有突变</h3><ul>
<li>现在已经涵盖了你在hw1上需要（和应该使用）的所有功能。</li>
<li>现在学习一个非常重要的非特性<ul>
<li>嗯？缺少一个功能怎么会很重要？</li>
<li>当它让你知道其他代码不会对你的代码做改变时</li>
</ul>
</li>
<li>函数式编程的一个主要方面和贡献：<ul>
<li>不能对变量或元组和列表的一部分进行赋值（也就是改变）。</li>
</ul>
</li>
<li>(这是个”大问题”)</li>
</ul>
<h3 id="无法告诉你是否复制了"><a href="#无法告诉你是否复制了" class="headerlink" title="无法告诉你是否复制了"></a>无法告诉你是否复制了</h3><pre class="line-numbers language-none"><code class="language-none">fun sort_pair (pr : int * int) &#x3D; 
	if #1 pr &lt; #2 pr
	then pr
	else (#2 pr, #1 pr)

fun sort_pair (pr : int * int) &#x3D; 
	if #1 pr &lt; #2 pr 
	then (#1 pr, #2 pr)
	else (#2 pr, #1 pr)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>在ML中，<code>sort_pair</code>的这两种实现是无法区分的<ul>
<li>但只是因为元组是不可变的</li>
<li>第一个是更好的风格：更简单，避免了在当时的分支中制造一个新的pair</li>
<li>在具有可变复合数据的语言中，这些是不同的!</li>
</ul>
</li>
</ul>
<h3 id="假设我们有突变-mutation"><a href="#假设我们有突变-mutation" class="headerlink" title="假设我们有突变(mutation)"></a>假设我们有突变(mutation)</h3><pre class="line-numbers language-none"><code class="language-none">val x &#x3D; (3,4)
val y &#x3D; sort_pair x

somehow mutate #1 x to hold 5

val z &#x3D; #1 y<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src= "/img/loading.gif" data-lazy-src="https://github.com/Doraemonzzz/md-photo/blob/master/programming-languages/Week2/3.jpg?raw=true" alt=""></p>
<ul>
<li><code>z</code>是什么？<ul>
<li>这将取决于我们如何实现<code>sort_pair</code>。<ul>
<li>必须仔细决定并记录<code>sort_pair</code>。</li>
</ul>
</li>
<li>但如果没有突变，我们可以实现”两种方式”<ul>
<li>没有任何代码可以区分别名和相同的副本</li>
<li>不需要考虑别名问题：专注于其他事情</li>
<li>可以使用别名，这样可以节省空间，而没有危险</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="更好的例子-1"><a href="#更好的例子-1" class="headerlink" title="更好的例子"></a>更好的例子</h3><pre class="line-numbers language-none"><code class="language-none">fun append (xs : int list, ys : int list) &#x3D;
    if null xs
    then ys
    else hd (xs) :: append (tl(xs), ys)
val x &#x3D; [2,4]
val y &#x3D; [5,3,0]
val z &#x3D; append(x,y)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src= "/img/loading.gif" data-lazy-src="https://github.com/Doraemonzzz/md-photo/blob/master/programming-languages/Week2/4.jpg?raw=true" alt=""></p>
<p>ML中是第一种情形。</p>
<h3 id="ML与命令式语言"><a href="#ML与命令式语言" class="headerlink" title="ML与命令式语言"></a>ML与命令式语言</h3><ul>
<li>在ML中，我们一直在创建别名而不去考虑它，因为不可能知道哪里有别名。<ul>
<li>例如：<code>tl</code>是常数时间；不复制列表的其他部分</li>
<li>所以不要担心，专注于你的算法</li>
</ul>
</li>
<li>在具有可变数据的语言中（如Java），程序员沉迷于别名和对象标识<ul>
<li>它们必须区别开，这样后续的赋值才会影响到程序的正确部分</li>
<li>在正确的地方进行复制往往是至关重要的<ul>
<li>下一节中的可选Java示例</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Java突变错误"><a href="#Java突变错误" class="headerlink" title="Java突变错误"></a>Java突变错误</h2><h3 id="Java安全的恶梦（不好的代码）"><a href="#Java安全的恶梦（不好的代码）" class="headerlink" title="Java安全的恶梦（不好的代码）"></a>Java安全的恶梦（不好的代码）</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">ProtectedResource</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token class-name">Resource</span> theResource <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> allowedUsers <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getAllowedUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    	<span class="token keyword">return</span> allowedUsers<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">currentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">useTheResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> allowedUsers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">currentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>allowedUsers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">// access allowed: use it</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
    	<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalAccessException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="必须进行复制"><a href="#必须进行复制" class="headerlink" title="必须进行复制"></a>必须进行复制</h3><p>问题：</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">p<span class="token punctuation">.</span><span class="token function">getAllowedUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">currentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">useTheResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>修复：</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getAllowedUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
   <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> copy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span>allowedUsers<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> allowedUsers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      copy<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> allowedUsers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> copy<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果代码是不可变的，引用（别名）与复制并不重要。</p>
<h2 id="学习一门语言的片段"><a href="#学习一门语言的片段" class="headerlink" title="学习一门语言的片段"></a>学习一门语言的片段</h2><h3 id="五种不同的东西"><a href="#五种不同的东西" class="headerlink" title="五种不同的东西"></a>五种不同的东西</h3><ol>
<li><strong>语法</strong>：你如何写语言结构？</li>
<li><strong>语义</strong>：程序是什么意思？(评估规则)</li>
<li><strong>习语(idioms)</strong> ：使用语言特性来表达你的计算的典型模式是什么？</li>
<li><strong>库</strong>：该语言（或知名项目）提供了哪些 “标准 “的设施？(例如，文件访问，数据结构)</li>
<li><strong>工具</strong>：语言的实现提供什么来使你的工作更容易？(例如，REPL，调试器，代码格式化，……)<ul>
<li>实际上并不是语言的一部分</li>
</ul>
</li>
</ol>
<p>这些是5个独立的问题</p>
<ul>
<li>在实践中，所有这些问题对于优秀的程序员来说都是必不可少的</li>
<li>许多人把它们混为一谈，但不应该如此</li>
</ul>
<h3 id="我们的重点"><a href="#我们的重点" class="headerlink" title="我们的重点"></a>我们的重点</h3><ul>
<li>本课程的重点是语义学和习语<ul>
<li>语法法通常是无趣的<ul>
<li>一个需要学习的事实，如”美国内战在1865年结束”</li>
<li>人们纠结于主观的偏好</li>
</ul>
</li>
<li>库和工具至关重要，但经常”在工作中”学习新的工具<ul>
<li>我们正在学习语义学，以及如何使用这些知识来理解所有的软件并采用适当的习语</li>
<li>通过避免使用大多数库/工具，我们的语言可能看起来很”傻”，但任何以这种方式使用的语言也会如此</li>
</ul>
</li>
</ul>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Doraemonzzz</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.doraemonzzz.com/2022/01/10/2022-1-10-Programming-Languages-Part-A-Week-2%E7%AC%94%E8%AE%B0/">http://www.doraemonzzz.com/2022/01/10/2022-1-10-Programming-Languages-Part-A-Week-2%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.doraemonzzz.com" target="_blank">Doraemonzzz</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Coursera-Programming-Languages/">Coursera Programming Languages</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/01/10/2022-1-10-Programming-Languages-Part-A-HW0/"><img class="prev-cover" src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Programming Languages Part A HW0</div></div></a></div><div class="next-post pull-right"><a href="/2022/01/10/2022-1-10-Programming-Languages-Part-A-Week-1%E7%AC%94%E8%AE%B0/"><img class="next-cover" src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Programming Languages Part A Week 1笔记</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/01/10/2022-1-10-Programming-Languages-Part-A-HW1/" title="Programming Languages Part A HW1"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-10</div><div class="title">Programming Languages Part A HW1</div></div></a></div><div><a href="/2022/01/10/2022-1-10-Programming-Languages-Part-A-HW0/" title="Programming Languages Part A HW0"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-10</div><div class="title">Programming Languages Part A HW0</div></div></a></div><div><a href="/2022/01/10/2022-1-10-Programming-Languages-Part-A-Week-1笔记/" title="Programming Languages Part A Week 1笔记"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-10</div><div class="title">Programming Languages Part A Week 1笔记</div></div></a></div><div><a href="/2022/02/28/2022-2-28-Programming-Languages-Part-A-HW3-Extra-Practice-Problems/" title="Programming Languages Part A HW3 Extra Practice Problems"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-28</div><div class="title">Programming Languages Part A HW3 Extra Practice Problems</div></div></a></div><div><a href="/2022/03/13/2022-3-13-Programming-Languages-Part-A-Exam/" title="Programming Languages Part A Exam"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-13</div><div class="title">Programming Languages Part A Exam</div></div></a></div><div><a href="/2022/03/13/2022-3-13-Programming-Languages-Part-A-Practice-Exam/" title="Programming Languages Part A Practice Exam"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-13</div><div class="title">Programming Languages Part A Practice Exam</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Livere</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="lv-container" data-id="city" data-uid="MTAyMC8zNDcxOS8xMTI1Ng=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src= "/img/loading.gif" data-lazy-src="https://github.com/Doraemonzzz/md-photo/blob/master/%E5%A4%B4%E5%83%8F.jpg?raw=true" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Doraemonzzz</div><div class="author-info__description">个人博客，主要记录有关机器学习，数学以及计算机科学的笔记</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">757</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">76</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">30</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Doraemonzzz"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Doraemonzzz" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/doraemon_zzz@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/291079982" target="_blank" title="Bilibili"><i class="iconfont icon-bilibili"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title=""><i class="fa fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">暂无公告</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Week-2"><span class="toc-number">1.</span> <span class="toc-text">Week 2</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ML%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8C%E5%8F%98%E9%87%8F%E7%BB%91%E5%AE%9A"><span class="toc-number">1.1.</span> <span class="toc-text">ML表达式和变量绑定</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E9%9D%9E%E5%B8%B8%E7%AE%80%E5%8D%95%E7%9A%84ML%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.1.1.</span> <span class="toc-text">一个非常简单的ML程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%BB%91%E5%AE%9A"><span class="toc-number">1.1.2.</span> <span class="toc-text">变量绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E4%B9%89"><span class="toc-number">1.1.3.</span> <span class="toc-text">语义</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ML%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E8%A7%84%E5%88%99%EF%BC%88%E5%88%B0%E7%9B%AE%E5%89%8D%E4%B8%BA%E6%AD%A2%E5%B7%B2%E7%9C%8B%E5%88%B0%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">ML表达式的规则（到目前为止已看到）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.2.1.</span> <span class="toc-text">表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.2.</span> <span class="toc-text">变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E6%B3%95"><span class="toc-number">1.2.3.</span> <span class="toc-text">加法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%80%BC"><span class="toc-number">1.2.4.</span> <span class="toc-text">值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#REPL%E5%92%8C%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF"><span class="toc-number">1.3.</span> <span class="toc-text">REPL和错误信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B5%E5%AD%A6"><span class="toc-number">1.3.1.</span> <span class="toc-text">实践学</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#use"><span class="toc-number">1.3.2.</span> <span class="toc-text">use</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#REPL"><span class="toc-number">1.3.3.</span> <span class="toc-text">REPL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%99%E8%AF%AF"><span class="toc-number">1.3.4.</span> <span class="toc-text">错误</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shadowing"><span class="toc-number">1.4.</span> <span class="toc-text">Shadowing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E4%B8%80%E5%8F%98%E9%87%8F%E7%9A%84%E5%A4%9A%E9%87%8D%E7%BB%91%E5%AE%9A"><span class="toc-number">1.4.1.</span> <span class="toc-text">同一变量的多重绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-number">1.4.2.</span> <span class="toc-text">例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E4%B8%AA%E5%8E%9F%E5%9B%A0"><span class="toc-number">1.4.3.</span> <span class="toc-text">两个原因</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#use-1"><span class="toc-number">1.4.4.</span> <span class="toc-text">use</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%EF%BC%88%E9%9D%9E%E6%AD%A3%E5%BC%8F%E7%9A%84%EF%BC%89"><span class="toc-number">1.5.</span> <span class="toc-text">函数（非正式的）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89"><span class="toc-number">1.5.1.</span> <span class="toc-text">函数定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E9%99%B7%E9%98%B1"><span class="toc-number">1.5.2.</span> <span class="toc-text">一些陷阱</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%92%E5%BD%92"><span class="toc-number">1.5.3.</span> <span class="toc-text">递归</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%EF%BC%88%E6%AD%A3%E5%BC%8F%E7%9A%84%EF%BC%89"><span class="toc-number">1.6.</span> <span class="toc-text">函数（正式的）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A%EF%BC%9A3%E4%B8%AA%E9%97%AE%E9%A2%98"><span class="toc-number">1.6.1.</span> <span class="toc-text">函数绑定：3个问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E5%A4%9A%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5"><span class="toc-number">1.6.2.</span> <span class="toc-text">更多类型检查</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8"><span class="toc-number">1.6.3.</span> <span class="toc-text">函数调用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pairs%E5%92%8C%E5%85%B6%E4%BB%96%E5%85%83%E7%BB%84"><span class="toc-number">1.7.</span> <span class="toc-text">Pairs和其他元组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%83%E7%BB%84%E5%92%8C%E5%88%97%E8%A1%A8"><span class="toc-number">1.7.1.</span> <span class="toc-text">元组和列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pairs%EF%BC%88%E4%B8%A4%E4%B8%AA%E5%85%83%E7%B4%A0%E7%9A%84%E5%85%83%E7%BB%84%EF%BC%89"><span class="toc-number">1.7.2.</span> <span class="toc-text">pairs（两个元素的元组）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90-1"><span class="toc-number">1.7.3.</span> <span class="toc-text">例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%83%E7%BB%84"><span class="toc-number">1.7.4.</span> <span class="toc-text">元组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97"><span class="toc-number">1.7.5.</span> <span class="toc-text">嵌套</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.8.</span> <span class="toc-text">列表介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8"><span class="toc-number">1.8.1.</span> <span class="toc-text">列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B%E5%88%97%E8%A1%A8"><span class="toc-number">1.8.2.</span> <span class="toc-text">建立列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%BE%97%E5%88%97%E8%A1%A8%E5%85%83%E7%BB%84"><span class="toc-number">1.8.3.</span> <span class="toc-text">获得列表元组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%93%8D%E4%BD%9C%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5"><span class="toc-number">1.8.4.</span> <span class="toc-text">列表操作的类型检查</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E5%87%BD%E6%95%B0"><span class="toc-number">1.9.</span> <span class="toc-text">列表函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E5%87%BD%E6%95%B0%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.9.1.</span> <span class="toc-text">列表函数示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%88%E6%98%AF%E9%80%92%E5%BD%92"><span class="toc-number">1.9.2.</span> <span class="toc-text">又是递归</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pair%E6%9E%84%E6%88%90%E7%9A%84%E5%88%97%E8%A1%A8"><span class="toc-number">1.9.3.</span> <span class="toc-text">pair构成的列表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Let%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.10.</span> <span class="toc-text">Let表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E4%B9%A0"><span class="toc-number">1.10.1.</span> <span class="toc-text">复习</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%B0%E5%9C%A8"><span class="toc-number">1.10.2.</span> <span class="toc-text">现在</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Let-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.10.3.</span> <span class="toc-text">Let-表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90-2"><span class="toc-number">1.10.4.</span> <span class="toc-text">例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-number">1.10.5.</span> <span class="toc-text">新的内容</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E5%87%BD%E6%95%B0"><span class="toc-number">1.11.</span> <span class="toc-text">嵌套函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%BB%E4%BD%95%E7%BB%91%E5%AE%9A"><span class="toc-number">1.11.1.</span> <span class="toc-text">任何绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90-3"><span class="toc-number">1.11.2.</span> <span class="toc-text">例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E5%A5%BD%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="toc-number">1.11.3.</span> <span class="toc-text">更好的例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E5%87%BD%E6%95%B0%EF%BC%9A%E9%A3%8E%E6%A0%BC"><span class="toc-number">1.11.4.</span> <span class="toc-text">嵌套函数：风格</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Let%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E8%AE%A1%E7%AE%97"><span class="toc-number">1.12.</span> <span class="toc-text">使用Let表达式避免重复计算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E9%80%92%E5%BD%92"><span class="toc-number">1.12.1.</span> <span class="toc-text">避免重复递归</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Fast-vs-unusable"><span class="toc-number">1.12.2.</span> <span class="toc-text">Fast vs unusable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6%E4%BB%8E%E4%B8%8D%E8%AF%B4%E8%B0%8E"><span class="toc-number">1.12.3.</span> <span class="toc-text">数学从不说谎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E6%95%88%E7%9A%84max"><span class="toc-number">1.12.4.</span> <span class="toc-text">高效的max</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Fast-vs-fast"><span class="toc-number">1.12.5.</span> <span class="toc-text">Fast vs fast</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Options"><span class="toc-number">1.13.</span> <span class="toc-text">Options</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Options%E7%9A%84%E5%8A%A8%E6%9C%BA"><span class="toc-number">1.13.1.</span> <span class="toc-text">Options的动机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Options-1"><span class="toc-number">1.13.2.</span> <span class="toc-text">Options</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90-4"><span class="toc-number">1.13.3.</span> <span class="toc-text">例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%90%8E%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="toc-number">1.13.4.</span> <span class="toc-text">修改后的例子</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E5%A4%9A%E5%B8%83%E5%B0%94%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8C%E6%AF%94%E8%BE%83%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.14.</span> <span class="toc-text">更多布尔表达式和比较表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E5%A4%9A%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.14.1.</span> <span class="toc-text">更多的表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E6%93%8D%E4%BD%9C"><span class="toc-number">1.14.2.</span> <span class="toc-text">布尔操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E8%BF%90%E7%AE%97%E7%9A%84%E9%A3%8E%E6%A0%BC"><span class="toc-number">1.14.3.</span> <span class="toc-text">布尔运算的风格</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.14.4.</span> <span class="toc-text">比较运算符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%95%B0%E6%8D%AE%E7%9A%84%E4%B8%80%E4%B8%AA%E5%85%B3%E9%94%AE%E5%A5%BD%E5%A4%84"><span class="toc-number">1.15.</span> <span class="toc-text">不可变数据的一个关键好处</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E6%9C%89%E4%BB%B7%E5%80%BC%E7%9A%84%E9%9D%9E%E7%89%B9%E6%80%A7%EF%BC%9A%E6%B2%A1%E6%9C%89%E7%AA%81%E5%8F%98"><span class="toc-number">1.15.1.</span> <span class="toc-text">一个有价值的非特性：没有突变</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A0%E6%B3%95%E5%91%8A%E8%AF%89%E4%BD%A0%E6%98%AF%E5%90%A6%E5%A4%8D%E5%88%B6%E4%BA%86"><span class="toc-number">1.15.2.</span> <span class="toc-text">无法告诉你是否复制了</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%81%87%E8%AE%BE%E6%88%91%E4%BB%AC%E6%9C%89%E7%AA%81%E5%8F%98-mutation"><span class="toc-number">1.15.3.</span> <span class="toc-text">假设我们有突变(mutation)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E5%A5%BD%E7%9A%84%E4%BE%8B%E5%AD%90-1"><span class="toc-number">1.15.4.</span> <span class="toc-text">更好的例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ML%E4%B8%8E%E5%91%BD%E4%BB%A4%E5%BC%8F%E8%AF%AD%E8%A8%80"><span class="toc-number">1.15.5.</span> <span class="toc-text">ML与命令式语言</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java%E7%AA%81%E5%8F%98%E9%94%99%E8%AF%AF"><span class="toc-number">1.16.</span> <span class="toc-text">Java突变错误</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Java%E5%AE%89%E5%85%A8%E7%9A%84%E6%81%B6%E6%A2%A6%EF%BC%88%E4%B8%8D%E5%A5%BD%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%89"><span class="toc-number">1.16.1.</span> <span class="toc-text">Java安全的恶梦（不好的代码）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%85%E9%A1%BB%E8%BF%9B%E8%A1%8C%E5%A4%8D%E5%88%B6"><span class="toc-number">1.16.2.</span> <span class="toc-text">必须进行复制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E4%B8%80%E9%97%A8%E8%AF%AD%E8%A8%80%E7%9A%84%E7%89%87%E6%AE%B5"><span class="toc-number">1.17.</span> <span class="toc-text">学习一门语言的片段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E7%A7%8D%E4%B8%8D%E5%90%8C%E7%9A%84%E4%B8%9C%E8%A5%BF"><span class="toc-number">1.17.1.</span> <span class="toc-text">五种不同的东西</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E4%BB%AC%E7%9A%84%E9%87%8D%E7%82%B9"><span class="toc-number">1.17.2.</span> <span class="toc-text">我们的重点</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/10/19/2022-10-19-GAMES102-Lecture-12-Geometry-3/" title="GAMES102 Lecture 12 Geometry 3"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GAMES102 Lecture 12 Geometry 3"/></a><div class="content"><a class="title" href="/2022/10/19/2022-10-19-GAMES102-Lecture-12-Geometry-3/" title="GAMES102 Lecture 12 Geometry 3">GAMES102 Lecture 12 Geometry 3</a><time datetime="2022-10-19T13:36:00.000Z" title="发表于 2022-10-19 21:36:00">2022-10-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/18/2022-10-18-GAMES102-Lecture-11-Geometry-2-(Curves-and-Surfaces)/" title="GAMES102 Lecture 11 Geometry 2 (Curves and Surfaces)"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GAMES102 Lecture 11 Geometry 2 (Curves and Surfaces)"/></a><div class="content"><a class="title" href="/2022/10/18/2022-10-18-GAMES102-Lecture-11-Geometry-2-(Curves-and-Surfaces)/" title="GAMES102 Lecture 11 Geometry 2 (Curves and Surfaces)">GAMES102 Lecture 11 Geometry 2 (Curves and Surfaces)</a><time datetime="2022-10-18T15:09:00.000Z" title="发表于 2022-10-18 23:09:00">2022-10-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/17/2022-10-17-Deep-Learning-Systems-HW1/" title="Deep Learning Systems HW1"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Deep Learning Systems HW1"/></a><div class="content"><a class="title" href="/2022/10/17/2022-10-17-Deep-Learning-Systems-HW1/" title="Deep Learning Systems HW1">Deep Learning Systems HW1</a><time datetime="2022-10-17T15:15:00.000Z" title="发表于 2022-10-17 23:15:00">2022-10-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/17/2022-10-17-Deep-Learning-Systems-HW0/" title="Deep Learning Systems HW0"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Deep Learning Systems HW0"/></a><div class="content"><a class="title" href="/2022/10/17/2022-10-17-Deep-Learning-Systems-HW0/" title="Deep Learning Systems HW0">Deep Learning Systems HW0</a><time datetime="2022-10-17T14:19:00.000Z" title="发表于 2022-10-17 22:19:00">2022-10-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/16/2022-10-16-Deep-Learning-Systems-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" title="Deep Learning Systems 开发环境配置"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Deep Learning Systems 开发环境配置"/></a><div class="content"><a class="title" href="/2022/10/16/2022-10-16-Deep-Learning-Systems-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" title="Deep Learning Systems 开发环境配置">Deep Learning Systems 开发环境配置</a><time datetime="2022-10-16T15:13:00.000Z" title="发表于 2022-10-16 23:13:00">2022-10-16</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2022 By Doraemonzzz</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.25
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'IpnmxCW9CvYWIXbol5QXsegX-MdYXbMMI',
      appKey: 'w57DVCdbxcyB1TYYagMIMJIU',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'en',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: true
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Valine' === 'Livere' || !false) {
  if (false) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>